# Name of the built-in keyboard (as shown in hyprctl devices)
BUILTIN_KB="at-translated-set-2-keyboard"

# List of possible external keyboard names (adjust these to match your hardware)
EXTERNAL_KEYBOARDS=(
  "sweep-keyboard"
  "corne-keyboard"
  "zmk-project-sweep-keyboard"
  "zmk-project-corne-keyboard"
)

# Give devices a moment to settle
sleep 1

# Get the list of devices from hyprctl
DEVICES_OUTPUT=$(hyprctl devices)

external_found=false
for ext in "${EXTERNAL_KEYBOARDS[@]}"; do
    if echo "$DEVICES_OUTPUT" | grep -q "$ext"; then
         external_found=true
         break
    fi
done

if [ "$external_found" = true ]; then
    # External keyboard detected: disable built-in keyboard
    hyprctl keyword "device[$BUILTIN_KB]:enabled" false
    notify-send "Built-in keyboard disabled (external keyboard detected)"
else
    # No external keyboard detected: enable built-in keyboard
    hyprctl keyword "device[$BUILTIN_KB]:enabled" true
    notify-send "Built-in keyboard enabled"
fi
